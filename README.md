# mgmi - Max Get My ID

Простой бот для MAX Messenger, который показывает chat_id и user_id по команде /start. Использует официальную библиотеку max-bot-api-client-go.

## Настройка

1. Зарегистрируй бота через @MasterBot в MAX:
   - Отправь `/create`
   - Выбери ник (например: `testidbot`)
   - Задай имя бота
   - Сохрани полученный токен

2. Установи переменные окружения:
   ```bash
   # Создай .env файл (опционально)
   echo 'MAX_BOT_TOKEN="твой_токен_здесь"' > .env
   echo 'PORT=8080' >> .env
   
   # Или экспортируй напрямую
   export MAX_BOT_TOKEN="твой_токен_здесь"
   export PORT=8080
   ```

## Запуск

```bash
./run.sh
```

или

```bash
go run main.go
```

## Установка webhook

После запуска сервера установи webhook одним из способов:

1. **Автоматически через утилиту:**
   ```bash
   go run utils/webhook_setup.go https://твой-домен.com/webhook
   ```

2. **Через официальный API:**
   ```bash
   curl -X POST "https://api.max.ru/bot<TOKEN>/setWebhook" \
        -H "Content-Type: application/json" \
        -d '{"url": "https://твой-домен.com/webhook"}'
   ```

3. **Через библиотеку (добавь в код):**
   ```go
   api.Subscriptions.Subscribe("https://твой-домен.com/webhook", []string{})
   ```

## Использование

Отправь боту команду `/start` и получи:
```
Chat ID: 123456789
User ID: 987654321
```

## Особенности

- Использует официальную библиотеку max-bot-api-client-go
- Автоматически проверяет подключение к боту при запуске
- Поддерживает webhook для получения обновлений
- Логирование всех событий
- Безопасное хранение токенов (исключены из git)

## Безопасность

⚠️ **Важно:** Никогда не коммить токен бота в git!

- Файл `.env` автоматически исключен из git
- Используй переменные окружения для токенов
- Токен дает полный доступ к боту
- При компрометации токена обнови его через @MasterBot:
  ```
  /refresh_token  # обновить токен
  /revoke        # отозвать текущий токен
  ``` 